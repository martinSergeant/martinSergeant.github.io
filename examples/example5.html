<!doctype html>
<html>
	<head>
	    <!-- css files required -->
		<link rel="stylesheet" href="../css/jquery-ui-bootstrap/jquery-ui-1.10.3.custom.css">
		<link rel="stylesheet" href="../css/fa-5.5.0/all.css">
		<link rel="stylesheet" href="./slickgrid/css/slick.default.theme.css">
		<link rel="stylesheet" href="./slickgrid/css/slick.grid.css">

  	</head>
  	<body>
     <table width="100%">
  <tr>
    <td valign="top" width="50%">
      <div id="myGrid" style="width:600px;height:500px;"></div>
    </td>
    <td valign="top">
    
    </td>
  </tr>
</table>

  	<script src="../src/vendor/zlib_and_gzip.min.js"></script>
    <script type = "module">
    	import '../src/vendor/jquery.min.js';
		import '../src/vendor/jquery-ui.min.js';
		//import any modules required
    	import {MLVPanel} from '../src/panel.js';
		import {SlickGrid} from './slickgrid/slick.grid.js';


  		let  grid = null;
  		let tracks = [{url:"http://martindev1.molbiol.ox.ac.uk/tracks/examples/peaks.bw",color:"#8e0000"}];
        let thumbnail_column = {id: "thumbnail", name: "Thumbnail",width:100,
        		asyncPostRender:function(cellNode, row, datacontext, colDef){
            		let item = grid.getDataItem(row);
            		let p = new MLVPanel(tracks,{div:$(cellNode)})
            		p.setBufferLevel(0);
            		p.update(item.chr,item.start,item.end);
        }}
  		var columns = [
  			thumbnail_column,
    		{id: "chr", name: "Chr", field: "chr"},
    		{id: "start", name: "Start", field: "start"},
    		{id: "end", name: "End", field: "end"}
  		];
  		var options = {
    		enableCellNavigation: true,
    		enableColumnReorder: false,
    		rowHeight:50,
    		enableAsyncPostRender: true
  		};
  		$(function () {
    		var data = [];
    		for (var i = 0; i < 500; i++) {
    			let st = Math.round(Math.random() * 5000000)+1000000
      			data[i] = {
        			chr:"chr16",
        			start: st,
        			end:st+20000
      			};
    		}
    	grid = new SlickGrid("#myGrid", data, columns, options);
  })
</script>
    		
  	</body>
</html>